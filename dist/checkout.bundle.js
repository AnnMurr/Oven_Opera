(()=>{"use strict";var e={908:(e,t,c)=>{c.d(t,{w:()=>i});var n=c(609);const o=document.querySelector(".readyOrder"),r=document.querySelector(".readyOrder .cross"),u=document.querySelector(".body-checkout");function s(){o.classList.remove("readyOrder_active"),u.classList.remove("body-checkout_background"),document.removeEventListener("click",i),(0,n.ze)("cart"),document.location.reload()}function i(e){o.classList.contains("readyOrder_active")&&e.target.classList.contains("body-checkout_background")&&s()}r.addEventListener("click",s)},609:(e,t,c)=>{function n(e){return JSON.parse(sessionStorage.getItem(e))}function o(e){return sessionStorage.removeItem(e)}c.d(t,{m3:()=>n,ze:()=>o})},961:(e,t,c)=>{function n(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(e)}c.d(t,{C:()=>n})},134:(e,t,c)=>{c.d(t,{Z:()=>d});var n=c(961);const o=e=>Number(Math.round(e+"e2")+"e-2");var r=c(609);const u=document.querySelector(".cart__cost-sum"),s=document.querySelector(".order__list-total-sum"),i=document.querySelector(".checkout__total-sum");function d(){const e=((0,r.m3)("cart")||[]).reduce(((e,t)=>e+(t.size?t.price[t.size]:t.price)*(t.pieces||1)),0);return u?u.textContent=(0,n.C)(e):i?i.textContent=(0,n.C)(e):s.textContent=(0,n.C)(e),o(e)}d()}},t={};function c(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,c),r.exports}c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=c(609),t=c(961);const n=document.querySelector(".checkout__order");var o=c(134);const r=(0,o.Z)(),u=document.querySelector(".checkout__discount-price");function s(c){const n=c.target.value;n&&"MONDAY"===n?function(){const c=(0,e.m3)("cart"),n=(new Date).toLocaleDateString("en-US",{weekday:"long"}),o=i(c);"Monday"===n&&function(e){const c=document.querySelector(".checkout__total-sum");let n=null;if(e.length>=2)for(let t=0;t<e.length-1;t++){const c=e[t].price,o=e[t+1].price;void 0!==c&&void 0!==o&&(n=null===n||c<=o?+c:+o)}if(n){const e=Number((r-n).toFixed(2));e+n===r&&(c.textContent=(0,t.C)(e),u.textContent=(0,t.C)(r))}}(o)}():n&&"THIRD"===n?function(e){const c=document.querySelector(".checkout__total-sum");if(e.length>=3){const e=.1*r;r-e+e===r&&(c.textContent=(0,t.C)(r-e),u.textContent=(0,t.C)(r))}}(i((0,e.m3)("cart"))):n&&"MOST"===n?function(e){const c=document.querySelector(".checkout__total-sum");if(e.length>=5){const e=.2*r;r-e+e===r&&(c.textContent=(0,t.C)(r-e),u.textContent=(0,t.C)(r))}}(i((0,e.m3)("cart"))):n&&"BEVERAGE"===n?function(){const c=(0,e.m3)("cart"),n=i(c),o=function(e){const t=[];return e.forEach((e=>{const c={title:e.title,price:e.price};"drink"===e.type&&t.push(c)})),t}(c);!function(e,c){const n=document.querySelector(".checkout__total-sum");let o=null;if(e.length>=3)if(1===c.length)o=c[0].price;else for(let e=0;e<c.length-1;e++){const t=c[e].price,n=c[e+1].price;void 0!==t&&void 0!==n&&(t<n?o=t:t>n&&(o=n))}if(o){const e=r-o;e+o===r&&(n.textContent=(0,t.C)(e),u.textContent=(0,t.C)(r))}}(n,o)}():((0,o.Z)(),u.textContent=null)}function i(e){const t=[];return e.forEach((e=>{const c={title:e.title,price:e.price[e.size]};if("pizza"===e.type&&(t.push(c),e.pieces))for(let n=1;n<e.pieces;n++)t.push(c)})),t}document.querySelectorAll(".checkout__input").forEach((e=>"Promo code"===e.previousElementSibling.textContent&&e.addEventListener("input",s)));var d=c(908);const a=document.querySelector(".checkout__button .btn"),l=document.querySelector(".body-checkout");a.addEventListener("click",(function(){const e=document.querySelectorAll(".checkout__input"),t=document.querySelector(".readyOrder"),c=document.querySelector(".readyOrder__total-sum"),n=document.querySelector(".checkout__total-sum");let o=!1,r=!1;e.forEach((e=>function(e){switch(e.previousElementSibling.textContent){case"Street":case"House":case"Phone":!function(e){0===e.value.length?e.classList.add("checkout__input_error"):e.classList.remove("checkout__input_error")}(e)}}(e)));o=void 0===Array.from(e).find((e=>e.classList.contains("checkout__input_error"))),r=function(){const e=document.querySelector(".checkout__total-sum"),t=document.querySelector(".checkout__subscription-minOrder");let c=!0;return e.textContent.slice(1,e.textContent.length)<12?(t.style.color="red",c=!1):t.style.color="black",c}(),o&&r&&(t.classList.add("readyOrder_active"),c.textContent=n.textContent,document.addEventListener("click",d.w),l.classList.add("body-checkout_background"))})),function(){const c=(0,e.m3)("cart");c&&c.forEach((e=>n.append(function(e){const c=document.createElement("div");return c.classList.add("checkout__order-wrapper"),c.append(function(e){const c=document.createElement("div");return c.classList.add("checkout__order-card"),c.append(function(e){const t=document.createElement("div");t.classList.add("checkout__order-name");const c=document.createElement("h5");return c.textContent=e.title,t.append(c),t}(e),function(e){const t=document.createElement("div");t.classList.add("checkout__order-counter");const c=document.createElement("span");return c.textContent=e.pieces||1,t.append(c),t}(e),function(e){const c=document.createElement("div");c.classList.add("checkout__order-price");const n=document.createElement("span"),o=e.size,r=e.pieces||1,u=o?e.price[o]*r:e.price*r,s=Number(u.toFixed(2));return n.textContent=(0,t.C)(s),c.append(n),c}(e)),c}(e)),c}(e))))}()})()})();