(()=>{"use strict";var e={908:(e,t,r)=>{r.d(t,{w:()=>i});var n=r(609),c=document.querySelector(".readyOrder"),o=document.querySelector(".readyOrder .cross"),u=document.querySelector(".body-checkout");function a(){c.classList.remove("readyOrder_active"),u.classList.remove("body-checkout_background"),document.removeEventListener("click",i),(0,n.ze)("cart"),document.location.reload()}function i(e){c.classList.contains("readyOrder_active")&&e.target.classList.contains("body-checkout_background")&&a()}o.addEventListener("click",a)},609:(e,t,r)=>{function n(e){return JSON.parse(sessionStorage.getItem(e))}function c(e){return sessionStorage.removeItem(e)}r.d(t,{m3:()=>n,ze:()=>c})},961:(e,t,r)=>{function n(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(e)}r.d(t,{C:()=>n})},134:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(961),c=function(e){return Number(Math.round(e+"e2")+"e-2")},o=r(609),u=document.querySelector(".cart__cost-sum"),a=document.querySelector(".order__list-total-sum"),i=document.querySelector(".checkout__total-sum");function d(){var e=((0,o.m3)("cart")||[]).reduce((function(e,t){return e+(t.size?t.price[t.size]:t.price)*(t.pieces||1)}),0);return u?u.textContent=(0,n.C)(e):i?i.textContent=(0,n.C)(e):a.textContent=(0,n.C)(e),c(e)}d()}},t={};function r(n){var c=t[n];if(void 0!==c)return c.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(609),t=r(961),n=document.querySelector(".checkout__order"),c=r(134),o=(0,c.Z)(),u=document.querySelector(".checkout__discount-price"),a=document.querySelector(".checkout__promo-error");function i(r){a.textContent=null;var n,i,l,s=r.target.value;s&&"MONDAY"===s?(n=(0,e.m3)("cart"),i=(new Date).toLocaleDateString("en-US",{weekday:"long"}),l=d(n),"Monday"===i?function(e){var r=document.querySelector(".checkout__total-sum"),n=null;if(e.length>=2)for(var c=0;c<e.length-1;c++){var a=e[c].price,i=e[c+1].price;void 0!==a&&void 0!==i&&(n=null===n||a<=i?+a:+i)}if(n){var d=Number((o-n).toFixed(2));d+n===o&&(r.textContent=(0,t.C)(d),u.textContent=(0,t.C)(o))}}(l):a.textContent="This promo code is not valid today"):s&&"THIRD"===s?function(e){var r=document.querySelector(".checkout__total-sum");if(e.length>=3){var n=.1*o;o-n+n===o&&(r.textContent=(0,t.C)(o-n),u.textContent=(0,t.C)(o))}}(d((0,e.m3)("cart"))):s&&"MOST"===s?function(e){var r=document.querySelector(".checkout__total-sum");if(e.length>=5){var n=.2*o;o-n+n===o&&(r.textContent=(0,t.C)(o-n),u.textContent=(0,t.C)(o))}}(d((0,e.m3)("cart"))):s&&"BEVERAGE"===s?function(){var r=(0,e.m3)("cart"),n=d(r),c=function(e){var t=[];return e.forEach((function(e){var r={title:e.title,price:e.price};"drink"===e.type&&t.push(r)})),t}(r);!function(e,r){var n=document.querySelector(".checkout__total-sum"),c=null;if(e.length>=3)if(1===r.length)c=r[0].price;else for(var a=0;a<r.length-1;a++){var i=r[a].price,d=r[a+1].price;void 0!==i&&void 0!==d&&(i<d?c=i:i>d&&(c=d))}if(c){var l=o-c;l+c===o&&(n.textContent=(0,t.C)(l),u.textContent=(0,t.C)(o))}}(n,c)}():((0,c.Z)(),u.textContent=null)}function d(e){var t=[];return e.forEach((function(e){var r={title:e.title,price:e.price[e.size]};if("pizza"===e.type&&(t.push(r),e.pieces))for(var n=1;n<e.pieces;n++)t.push(r)})),t}document.querySelectorAll(".checkout__input").forEach((function(e){return"Promo code"===e.previousElementSibling.textContent&&e.addEventListener("input",i)}));var l,s=r(908),m=document.querySelector(".checkout__button .btn"),v=document.querySelector(".body-checkout");m.addEventListener("click",(function(){var e,t,r=document.querySelectorAll(".checkout__input"),n=document.querySelector(".readyOrder"),c=document.querySelector(".readyOrder__total-sum"),o=document.querySelector(".checkout__total-sum");r.forEach((function(e){return function(e){switch(e.previousElementSibling.textContent){case"Street":case"House":case"Phone":!function(e){0===e.value.length?e.classList.add("checkout__input_error"):e.classList.remove("checkout__input_error")}(e)}}(e)})),t=void 0===Array.from(r).find((function(e){return e.classList.contains("checkout__input_error")})),e=function(){var e=document.querySelector(".checkout__total-sum"),t=document.querySelector(".checkout__subscription-minOrder"),r=!0;return e.textContent.slice(1,e.textContent.length)<12?(t.style.color="red",r=!1):t.style.color="black",r}(),t&&e&&(n.classList.add("readyOrder_active"),c.textContent=o.textContent,document.addEventListener("click",s.w),v.classList.add("body-checkout_background"))})),(l=(0,e.m3)("cart"))&&l.forEach((function(e){return n.append(function(e){var r=document.createElement("div");return r.classList.add("checkout__order-wrapper"),r.append(function(e){var r=document.createElement("div");return r.classList.add("checkout__order-card"),r.append(function(e){var t=document.createElement("div");t.classList.add("checkout__order-name");var r=document.createElement("h5");return r.textContent=e.title,t.append(r),t}(e),function(e){var t=document.createElement("div");t.classList.add("checkout__order-counter");var r=document.createElement("span");return r.textContent=e.pieces||1,t.append(r),t}(e),function(e){var r=document.createElement("div");r.classList.add("checkout__order-price");var n=document.createElement("span"),c=e.size,o=e.pieces||1,u=c?e.price[c]*o:e.price*o,a=Number(u.toFixed(2));return n.textContent=(0,t.C)(a),r.append(n),r}(e)),r}(e)),r}(e))}))})()})();